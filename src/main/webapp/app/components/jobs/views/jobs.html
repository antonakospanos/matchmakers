<div ng-controller="JobsCtrl as ctrl" ng-init="ctrl.init()">
  <div class="config-control-panel config-panel-margin main-width ">
    <div class="pageTitle">
      {{ model.data.length > 0 ? "Matching Jobs" : "No Jobs Found. :(" }}
    </div>

    <div
      ng-repeat="item in model.data"
      class="job panel panel-default control-panel config-control-panel config-panel-margin main-width md-whiteframe-6dp review-panel review-item-container"
    >
      <button
        class="md-button-toggle md-button md-ink-ripple review-item-button"
        type="button"
        ng-click="toggled = !toggled"
        aria-controls="docs-menu-{{ item.title }}"
        aria-expanded="form.item.toggled"
        aria-label="item.id"
      >
        <div flex layout="row" class="ng-binding ng-scope layout-row flex">
          <img class="job-image" src="{{ item.logo }}" width="50" height="50" />
          <div class="job-info">
            <h4 class="title">{{ item.title }}</h4>
            <div class="company">{{ item.company }}</div>
          </div>

          <span flex class="flex"></span>
          <div
            class="row job-percentage float-right"
            ng-style="{background: ctrl.decideColor(item)}"
          >
            {{ item.match }}%
          </div>
          <span
            aria-hidden="true"
            class="md-toggle-icon"
            ng-class="{'toggled' : toggled}"
          >
            <md-icon md-svg-icon="md-toggle-arrow"></md-icon>
          </span>
        </div>
      </button>

      <div
        id="docs-menu-{{ item.title }}"
        class="menu-toggle-list"
        ng-class="{'toggled' : !toggled}"
      >
        <div class="config-overview-contents">
          <div class="panel-body">
            <div>
              <div class="description">
                {{ item.description }}
              </div>
              <div class="publish-info">
                By
                <a
                  aria-pressed="true"
                  role="button"
                  ng-click="ctrl.filterByPublisher(item)"
                >
                  {{ item.publisher.name }}</a
                >
                on {{ item.publisher.date | date: "d LLLL yyyy, HH:mm" }}
              </div>
              <div
                ng-init="ctrl.findVote(item)"
                ng-hide="ctrl.hideVotingButtons()"
                id="voting-buttons"
              >
                <button
                  ng-hide="ctrl.hideApplyButton(item)"
                  type="button"
                  class="pull-right btn btn-default review-control-button"
                  ng-click="ctrl.apply(item)"
                >
                  View Job
                </button>
                <button
                  ng-hide="ctrl.hideApplyButton(item)"
                  type="button"
                  class="pull-right btn btn-default review-control-button"
                  ng-click="ctrl.apply(item)"
                >
                  Apply
                </button>
                <!--<button ng-hide="ctrl.hideRetractButton(item)" type="button" class="pull-right btn btn-danger review-control-button" ng-click="ctrl.retract(item)">Retract Application</button>-->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
